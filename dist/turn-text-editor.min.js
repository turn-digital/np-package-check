/**
 * @license
 *
 * Copyright IBM Corp. 2019, 2020
 *
 * This source code is licensed under the Apache-2.0 license found in the
 * LICENSE file in the root directory of this source tree.
 */
/**
 * @license
 * 
 * This bundle contains the following third-party dependencies:
 * 
 * flatpickr:
 * 
 flatpickr v4.6.1, @license MIT
 * 
 * @carbon/motion:
 * 
 * Copyright IBM Corp. 2018, 2023
 *
 * This source code is licensed under the Apache-2.0 license found in the
 * LICENSE file in the root directory of this source tree.
 * 
 * @carbon/colors:
 * 
 * Copyright IBM Corp. 2018, 2023
 *
 * This source code is licensed under the Apache-2.0 license found in the
 * LICENSE file in the root directory of this source tree.
 * 
 * dompurify:
 * 
 @license DOMPurify 2.4.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.4.7/LICENSE
 * 
 * lit-element:
 * 
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 * 
 * lit-html:
 * 
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 * 
 * @lit/reactive-element:
 * 
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 * 
 * @carbon/layout:
 * 
 * Copyright IBM Corp. 2018, 2023
 *
 * This source code is licensed under the Apache-2.0 license found in the
 * LICENSE file in the root directory of this source tree.
 * 
 * Also refer to the following links for the license of other third-party dependencies:
 * 
 * https://www.npmjs.com/package/lit
 * https://www.npmjs.com/package/@carbon/icons
 * https://www.npmjs.com/package/lodash-es
 */

import{_ as t}from"./objectSpread2-0b7e8561.js";import{i as e,_ as o,s as n,x as i,p as s}from"./settings-387c0fa4.js";import{n as r}from"./query-assigned-elements-8e88277c.js";import{c as a}from"./carbon-element-4ca9803f.js";var l=e([""]);!function(){const t="undefined"!=typeof window?window:Function("return this;")(),e=(e,o)=>((e,o)=>{let n=null!=o?o:t;for(let t=0;t<e.length&&null!=n;++t)n=n[e[t]];return n})(e.split("."),o),o=Object.keys,n=Object.hasOwnProperty,i=(t,e)=>n.call(t,e);let s=0;const r=t=>{const e=(new Date).getTime(),o=Math.floor(1e9*Math.random());return s++,t+"_"+o+s+String(e)},a=()=>({listeners:[],scriptId:r("tiny-script"),scriptLoaded:!1}),l=(()=>{let t=a();return{load:(e,o,n)=>{t.scriptLoaded?n():(t.listeners.push(n),e.getElementById(t.scriptId)||((t,e,o,n)=>{const i=e.createElement("script");i.referrerPolicy="origin",i.type="application/javascript",i.id=t,i.src=o;const s=()=>{i.removeEventListener("load",s),n()};i.addEventListener("load",s),e.head&&e.head.appendChild(i)})(t.scriptId,e,o,(()=>{t.listeners.forEach((t=>t())),t.scriptLoaded=!0})))},reinitialize:()=>{t=a()}}})();var d;!function(t){t[t.Raw=0]="Raw",t[t.Initializing=1]="Initializing",t[t.Ready=2]="Ready"}(d||(d={}));const u=(t,e)=>{const o=e.closest(t);if(null!==o)return o;const n=e.getRootNode().host;return null!=n?u(t,n):null},c=t=>e=>((t,e)=>i(t,e))(t,e)?t[e]:e,h=e,m=t=>t,_=c({false:!1}),g=c({true:!0,false:!1}),f=t=>/^\d+$/.test(t)?Number.parseInt(t,10):t,p={setup:h,statusbar:g,toolbar:_,menubar:_,plugins:m,content_css:m,content_style:m,width:f,height:f,toolbar_mode:m,contextmenu:_,quickbars_insert_toolbar:_,quickbars_selection_toolbar:_,powerpaste_word_import:m,powerpaste_html_import:m,powerpaste_allow_local_images:g,resize:g,skin:m,skin_url:m,images_upload_url:m,images_upload_handler:h,images_upload_base_path:m,images_upload_credentials:g,images_reuse_filename:g,icons:m,icons_url:m,promotion:g},v={};class b extends HTMLElement{static get formAssociated(){return!0}static get observedAttributes(){return["form","readonly","autofocus","placeholder"].concat(["on-BeforePaste","on-Blur","on-Click","on-ContextMenu","on-Copy","on-Cut","on-Dblclick","on-Drag","on-DragDrop","on-DragEnd","on-DragGesture","on-DragOver","on-Drop","on-Focus","on-FocusIn","on-FocusOut","on-KeyDown","on-KeyPress","on-KeyUp","on-MouseDown","on-MouseEnter","on-MouseLeave","on-MouseMove","on-MouseOut","on-MouseOver","on-MouseUp","on-Paste","on-SelectionChange"]).concat(["on-Activate","on-AddUndo","on-BeforeAddUndo","on-BeforeExecCommand","on-BeforeGetContent","on-BeforeRenderUI","on-BeforeSetContent","on-Change","on-ClearUndos","on-Deactivate","on-Dirty","on-ExecCommand","on-GetContent","on-Hide","on-Init","on-LoadContent","on-NodeChange","on-PostProcess","on-PostRender","on-PreProcess","on-ProgressState","on-Redo","on-Remove","on-Reset","on-SaveContent","on-SetAttrib","on-ObjectResizeStart","on-ObjectResized","on-ObjectSelected","on-SetContent","on-Show","on-Submit","on-Undo","on-VisualAid"])}constructor(){super(),this._eventAttrHandler=t=>{t.forEach((t=>{var e;"attributes"===t.type&&t.target===this&&(null===(e=t.attributeName)||void 0===e?void 0:e.toLowerCase().startsWith("on-"))&&this._updateEventAttr(t.attributeName,this.getAttribute(t.attributeName))}))},this._formDataHandler=t=>{const e=this.name;if(null!=e){const o=this.value;if(null!=o){t.formData.append(e,o)}}},this._status=d.Raw,this._shadowDom=this.attachShadow({mode:"open"}),this._form=null,this._eventHandlers={},this._mutationObserver=new MutationObserver(this._eventAttrHandler)}_updateEventAttr(t,o){const n=t.substring(3).toLowerCase(),i=null!==o?e(o):void 0,s="function"==typeof i?i:void 0;this._eventHandlers[n]!==s&&(this._editor&&this._eventHandlers[n]&&this._editor.off(n,this._eventHandlers[n]),s?(this._editor&&this._editor.on(n,s),this._eventHandlers[n]=s):delete this._eventHandlers[n])}_updateForm(){if(this.isConnected){const t=this.getAttribute("form"),e=null!==t?this.ownerDocument.querySelector("form#"+t):u("form",this);this._form!==e&&(null!==this._form&&this._form.removeEventListener("formdata",this._formDataHandler),this._form=e,null!==this._form&&this._form.addEventListener("formdata",this._formDataHandler))}else null!==this._form&&(this._form.removeEventListener("formdata",this._formDataHandler),this._form=null)}_getTinymce(){return t.tinymce}_getConfig(){var t,e;const o=null!==(e=h(null!==(t=this.getAttribute("config"))&&void 0!==t?t:""))&&void 0!==e?e:{};for(let t=0;t<this.attributes.length;t++){const e=this.attributes.item(t);if(null!==e&&i(p,e.name)){o[i(v,e.name)?v[e.name]:e.name]=p[e.name](e.value)}}return this.readonly&&(o.readonly=!0),this.autofocus&&(o.auto_focus=!0),delete o.target,delete o.selector,o}_getEventHandlers(){const t={};for(let o=0;o<this.attributes.length;o++){const n=this.attributes.item(o);if(null!==n&&n.name.toLowerCase().startsWith("on-")){const o=n.name.toLowerCase().substring(3),i=e(n.value);"function"==typeof i&&(t[o]=i)}}return t}_doInit(){var t,e;this._status=d.Initializing;const n=document.createElement("textarea");n.value=null!==(t=this.textContent)&&void 0!==t?t:"";const i=null===(e=this.attributes.getNamedItem("id"))||void 0===e?void 0:e.value;i&&(n.id=i),null!==this.placeholder&&(n.placeholder=this.placeholder),this._shadowDom.appendChild(n);const s=this._getConfig(),r=Object.assign(Object.assign({},s),{target:n,setup:t=>{this._editor=t,t.on("init",(t=>{this._status=d.Ready})),t.on("SwitchMode",(t=>{this.readonly=this.readonly})),((t,e)=>{const n=o(t);for(let o=0,i=n.length;o<i;o++){const i=n[o];e(t[i],i)}})(this._eventHandlers,((e,o)=>{void 0!==e&&t.on(o,e)})),"function"==typeof s.setup&&s.setup(t)}});this._getTinymce().init(r)}_getTinymceSrc(){console.log(window.location.origin);window.location.origin;return"https://demo.turn.lv/cfla_dist/assets/tinymce/tinymce.min.js"}_loadTinyDoInit(){this._getTinymce()?this._doInit():l.load(this.ownerDocument,this._getTinymceSrc(),(()=>this._doInit()))}attributeChangedCallback(t,e,o){e!==o&&("form"===t?this._updateForm():"readonly"===t?this.readonly=null!==o:"autofocus"===t?this.autofocus=null!==o:"placeholder"===t?this.placeholder=o:t.toLowerCase().startsWith("on-")&&this._updateEventAttr(t,o))}connectedCallback(){this._eventHandlers=this._getEventHandlers(),this._mutationObserver.observe(this,{attributes:!0,childList:!1,subtree:!1}),this._updateForm(),this._status===d.Raw&&this._loadTinyDoInit()}disconnectedCallback(){this._mutationObserver.disconnect(),this._updateForm()}get value(){var t,e;return null!==(e=this._status===d.Ready?null===(t=this._editor)||void 0===t?void 0:t.getContent():void 0)&&void 0!==e?e:null}set value(t){var e;this._status===d.Ready&&null!=t&&(null===(e=this._editor)||void 0===e||e.setContent(t))}get readonly(){return this._editor?"readonly"===this._editor.mode.get():this.hasAttribute("readonly")}set readonly(t){t?(this._editor&&"readonly"!==this._editor.mode.get()&&this._editor.mode.set("readonly"),this.hasAttribute("readonly")||this.setAttribute("readonly","")):(this._editor&&"readonly"===this._editor.mode.get()&&this._editor.mode.set("design"),this.hasAttribute("readonly")&&this.removeAttribute("readonly"))}get placeholder(){return this.getAttribute("placeholder")}set placeholder(t){if(this._editor){const e=this._editor.getElement();null!==e&&(null!==t?e.setAttribute("placeholder",t):e.removeAttribute("placeholder"))}null!==t?this.getAttribute("placeholder")!==t&&this.setAttribute("placeholder",t):this.hasAttribute("placeholder")&&this.removeAttribute("placeholder")}get autofocus(){return this.hasAttribute("autofocus")}set autofocus(t){t?this.hasAttribute("autofocus")||this.setAttribute("autofocus",""):this.hasAttribute("autofocus")&&this.removeAttribute("autofocus")}get form(){return this._form}get name(){return this.getAttribute("name")}get type(){return this.localName}}window.customElements.define("tinymce-editor",b)}();let d,u=t=>t;o([a(`${s}-text-editor`)],(function(e,o){return{F:class extends o{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[r({type:Boolean})],key:"readonly",value:()=>!1},{kind:"field",decorators:[r({type:String})],key:"editorId",value:()=>"editor"},{kind:"field",decorators:[r({type:String})],key:"textEditorData",value:()=>""},{kind:"field",decorators:[r({type:Object})],key:"editorConfig",value:()=>({})},{kind:"get",key:"combinedEditorConfig",value:function(){return t(t({},{language:"lv",language_url:"https://demo.turn.lv/cfla_dist/assets/tinymce/langs/lv.js",branding:!1,menubar:!1,highlight_on_focus:!0,promotion:!0,min_height:200,max_height:500,external_plugins:{pluginId1:"https://demo.turn.lv/cfla_dist/assets/tinymce/plugins/length_validation/plugin.min.js",pluginId2:"https://demo.turn.lv/cfla_dist/assets/tinymce/plugins/server_request/plugin.min.js"}}),this.editorConfig)}},{kind:"method",key:"render",value:function(){const t=`config_${this.editorId}`;return window[t]=this.combinedEditorConfig,window.localStorage.setItem(`${this.editorId}_content`,this.textEditorData),i(d||(d=u`
      <tinymce-editor
        id="${0}"
        config="${0}"
        statusbar: false
        autoresize_bottom_margin: 5
        ?readonly="${0}"
        toolbar="blocks | bold italic underline | numlist bullist | outdent indent | alignleft aligncenter alignright alignjustify | link removeformat fullscreen"
        plugins="length_validation server_request autosave save autolink lists link image charmap preview anchor pagebreak code visualchars wordcount fullscreen autoresize"
        content_css="//www.tiny.cloud/css/codepen.min.css"
        promotion="false">
        ${0}
      </tinymce-editor>
    `),this.editorId,"config_"+this.editorId,this.readonly,this.textEditorData)}},{kind:"field",static:!0,key:"styles",value:()=>l}]}}),n);
